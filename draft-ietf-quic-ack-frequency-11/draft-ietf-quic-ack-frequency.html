<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>QUIC Acknowledgment Frequency</title>
<meta content="Jana Iyengar" name="author">
<meta content="Ian Swett" name="author">
<meta content="Mirja Kühlewind" name="author">
<meta content="
       This document specifies an extension to QUIC that enables an endpoint to
request its peer change its behavior when sending or delaying acknowledgments. 
    " name="description">
<meta content="xml2rfc 3.27.0" name="generator">
<meta content="draft-ietf-quic-ack-frequency-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.27.0
    Python 3.12.9
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.5
    lxml 5.3.0
    platformdirs 4.3.6
    pycountry 24.6.1
    PyYAML 6.0.2
    requests 2.32.3
    setuptools 70.3.0
    wcwidth 0.2.13
-->
<link href="draft-ietf-quic-ack-frequency.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  --font-title: "Sofia Sans Semi Condensed", sans-serif;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
section {
  clear: both;
}
.section-number {
  padding-right: 0.5em;
}
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-title);
  font-weight: 680;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
  vertical-align: top;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
  & :is(ol, ul) {
    margin-left: 1em;
  }
}
li {
  margin: 0 0 0.25em 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
  & li {
    margin-top: 0.5em;
  }
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  margin: 0 0 0 2em;
  & li {
    margin: 0;
    & :first-child { margin-top: 0; }
    & :last-child { margin-bottom: 0; }
  }
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
  &.olPercent {
    --indent: 5ch;
    & > dt {
      min-width: calc(var(--indent) - 2ch);
    }
  }
  &.olPercent > dt {
    float: none;
  }

  dl > dd > & {
    margin-top: 0.5em;
    margin-bottom: 0;
  }
}
dl:not(.dlNewline) > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
  & > :is(:first-child, .break:first-child + *) {
    margin-top: 0;
  }
  & > :is(:last-child) {
    margin-bottom: 0;
  }
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
  caption-side: bottom;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    /* In the horizontal direction, sometimes people make over-sized figures.
       Scrollbars for those is therefore necessary: auto adds them as necessary..
       In the vertical direction, the line-height can combine with the font
       asender/descender height to produce scrollbars: hidden avoids that. */
    overflow: auto hidden;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: auto;
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
  &[href] {
    color: var(--pilcrow-weak);
    &:hover { text-decoration: none; }
  }
}
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
  & dt {
    width: var(--identifier-width);
    min-width: var(--identifier-width);
    clear: left;
    float: left;
    text-align: right;
    margin-right: 1ch;
  }
  & dd {
    margin: 0;
    margin-left: calc(1em + var(--identifier-width)) !important;
    min-width: 5em;
  }
  & .authors {
    & .author {
      display: inline-block;
      margin-right: 1.5em;
    }
    & .org {
      font-style: italic;
    }
  }
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;

  & nav {
    & ul {
      margin: 0 0.5em 0 0;
      padding: 0;
      list-style: none;
    }
    & li {
      line-height: 1.3em;
      margin: 2px 0;
      padding-left: 1.2em;
      text-indent: -1.2em;
    }
  }
  & a.xref {
    white-space: normal;
  }
}

.references {
  & > dt {
    text-align: right;
    font-weight: bold;
    min-width: 10ch;
    margin-right: 1.5ch;
    &:target::before {
      content: "⇒";
      margin: 0 10px 0 -25px;
    }
  }
  & > dd {
    margin-left: 12ch !important;
    overflow: visible;
    & .refInstance {
      margin-bottom: 0.8em;
    }
    & .ascii {
      margin-bottom: 0.25em;
    }
  }
}

#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  max-width: 20em;
  margin: 1em auto 1em 0;

  & .nameRole {
    font-weight: 700;
    margin-left: 0;
  }
  & .label {
    margin: 0.5em 0;
  }
  & .type {
    display: none;
  }
  & .alternative-contact {
    margin: 0.5em 0 0.25em 0;
  }
  & .non-ascii {
    margin: 0 0 0 2em;
  }
  & div.left {
    text-align: left;
  }
  & div.right {
    text-align: right;
  }
}

hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

/* Comments */
.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}

@media screen {
  #toc nav {
    font-family: var(--font-title);
    font-weight: 360;
    & > ul { margin-bottom: 2em; }
    & ul {
      margin: 0 0 0 4px;
      & :is(p, li) {
        margin: 2px 0;
      }
    }
  }
  #toc a.toplink {
    float: right;
  }
}
@media not screen {
  #toc a.toplink {
    display: none;
  }
}


/* TOC layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
    &::before { /* css hamburger */
      float: right;
      position: relative;
      width: 1em;
      height: 1px;
      left: -164px;
      margin: 8px 0 0 0;
      background: white none repeat scroll 0 0;
      box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
      content: "";
    }
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active {
    opacity: 1;
    & nav { display: block; }
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:is(:link, :focus, :hover),
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin: 2px 0.5em 0;
  }
}

/* TOC layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
  #toc a.toplink {
    margin: 8px 0.5em 0;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">QUIC Acknowledgment Frequency</td>
<td class="right">February 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Iyengar, et al.</td>
<td class="center">Expires 1 September 2025</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">QUIC</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-quic-ack-frequency-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-02-28" class="published">28 February 2025</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2025-09-01">1 September 2025</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">J. Iyengar</div>
<div class="org">Fastly</div>
</div>
<div class="author">
      <div class="author-name">I. Swett</div>
<div class="org">Google</div>
</div>
<div class="author">
      <div class="author-name">M. Kühlewind</div>
<div class="org">Ericsson</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">QUIC Acknowledgment Frequency</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document specifies an extension to QUIC that enables an endpoint to
request its peer change its behavior when sending or delaying acknowledgments.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-note-to-readers">
<a href="#name-note-to-readers" class="section-name selfRef">Note to Readers</a>
      </h2>
<p id="section-note.1-1">Discussion of this draft takes place on the QUIC working group mailing list
(quic@ietf.org), which is archived at
<span><a href="https://mailarchive.ietf.org/arch/search/?email_list=quic">https://mailarchive.ietf.org/arch/search/?email_list=quic</a></span>. Source
code and issues list for this draft can be found at
<span><a href="https://github.com/quicwg/ack-frequency">https://github.com/quicwg/ack-frequency</a></span>.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Working Group information can be found at <span><a href="https://github.com/quicwg">https://github.com/quicwg</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 1 September 2025.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-terms-and-definitions" class="internal xref">Terms and Definitions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-motivation" class="internal xref">Motivation</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-negotiating-extension-use" class="internal xref">Negotiating Extension Use</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-ack_frequency-frame" class="internal xref">ACK_FREQUENCY Frame</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-immediate_ack-frame" class="internal xref">IMMEDIATE_ACK Frame</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-sending-acknowledgments" class="internal xref">Sending Acknowledgments</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-response-to-long-idle-perio" class="internal xref">Response to long idle periods</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-response-to-out-of-order-pa" class="internal xref">Response to Out-of-Order Packets</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.1">
                    <p id="section-toc.1-1.6.2.2.2.1.1"><a href="#section-6.2.1" class="auto internal xref">6.2.1</a>.  <a href="#name-examples" class="internal xref">Examples</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-setting-the-reordering-thre" class="internal xref">Setting the Reordering Threshold value</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="auto internal xref">6.4</a>.  <a href="#name-expediting-explicit-congest" class="internal xref">Expediting Explicit Congestion Notification (ECN) Signals</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5">
                <p id="section-toc.1-1.6.2.5.1"><a href="#section-6.5" class="auto internal xref">6.5</a>.  <a href="#name-batch-processing-of-packets" class="internal xref">Batch Processing of Packets</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-computation-of-probe-timeou" class="internal xref">Computation of Probe Timeout Period</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-determining-acknowledgment-" class="internal xref">Determining Acknowledgment Frequency</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-congestion-control" class="internal xref">Congestion Control</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.1">
                    <p id="section-toc.1-1.8.2.1.2.1.1"><a href="#section-8.1.1" class="auto internal xref">8.1.1</a>.  <a href="#name-application-limited-connect" class="internal xref">Application-Limited Connections</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-burst-mitigation" class="internal xref">Burst Mitigation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="auto internal xref">8.3</a>.  <a href="#name-loss-detection-and-timers" class="internal xref">Loss Detection and Timers</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#section-8.4" class="auto internal xref">8.4</a>.  <a href="#name-connection-migration" class="internal xref">Connection Migration</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-quic-transport-parameter" class="internal xref">QUIC Transport Parameter</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-quic-frame-types" class="internal xref">QUIC Frame Types</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="auto internal xref">11.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="auto internal xref">11.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The QUIC transport protocol recommends sending an ACK frame after receiving at
least two ack-eliciting packets; see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2" class="relref">Section 13.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.
However, the data receiver determines how frequently to send acknowledgments
in response to ack-eliciting packets, without any ability for the data sender
to influence this behavior. This document specifies an extension to
QUIC that enables an endpoint to request its peer change its behavior when sending or
delaying acknowledgments.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">This document defines a new transport parameter that indicates support of this
extension and specifies two new frame types to request changes to the peer's
acknowledgement behavior.<a href="#section-1-2" class="pilcrow">¶</a></p>
<div id="terms-and-definitions">
<section id="section-1.1">
        <h3 id="name-terms-and-definitions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-terms-and-definitions" class="section-name selfRef">Terms and Definitions</a>
        </h3>
<p id="section-1.1-1">The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span>
when, and only when, they appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">In the rest of this document, "sender" refers to a QUIC data sender (and
acknowledgment receiver). Similarly, "receiver" refers to a QUIC data receiver
(and acknowledgment sender).<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">This document uses terms, definitions, and notational conventions described in
Section <a href="https://rfc-editor.org/rfc/rfc9000#section-1.2" class="relref">1.2</a> and Section <a href="https://rfc-editor.org/rfc/rfc9000#section-1.3" class="relref">1.3</a> of <span>[<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="motivation">
<section id="section-2">
      <h2 id="name-motivation">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-motivation" class="section-name selfRef">Motivation</a>
      </h2>
<p id="section-2-1">A receiver acknowledges received packets, but can delay sending these
acknowledgments. Delaying acknowledgments can impact a data sender's
throughput, loss detection and congestion controller performance, as well
as CPU utilization at both endpoints.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">Reducing the frequency of acknowledgments can improve connection and
endpoint performance in the following ways:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-3.1">
          <p id="section-2-3.1.1">Sending UDP datagrams is very CPU intensive on some platforms. A data
receiver can decrease its CPU usage by reducing the number of
acknowledgement-only packets sent. Experience shows that this
reduction can be critical for high packet rate connections.<a href="#section-2-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-3.2">
          <p id="section-2-3.2.1">Similarly, receiving UDP datagrams can also be CPU intensive. Reducing the
acknowledgement frequency also reduces the data sender's CPU usage because
it receives and processes fewer acknowledgment-only packets.<a href="#section-2-3.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-3.3">
          <p id="section-2-3.3.1">For asymmetric link technologies, such as DOCSIS, LTE, and satellite,
connection throughput in the forward path can become constrained
when the reverse path is filled by acknowledgment packets <span>[<a href="#RFC3449" class="cite xref">RFC3449</a>]</span>.
When traversing such links, reducing the number of acknowledgments can achieve
higher connection throughput, lower the impact on other flows or optimise the
overall use of transmission resources <span>[<a href="#Cus22" class="cite xref">Cus22</a>]</span>.<a href="#section-2-3.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-3.4">
          <p id="section-2-3.4.1">The rate of acknowledgment packets can reduce link efficiency, including
transmission opportunities or battery life, as well as transmission
opportunities available to other flows sharing the same link.<a href="#section-2-3.4.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-2-4">However, as discussed in <a href="#implementation" class="auto internal xref">Section 8</a>, a unilateral reduction in
acknowledgement frequency can lead to undesirable consequences for congestion
control and loss recovery. <span>[<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span> specifies a simple delayed
acknowledgment mechanism (<span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2.1" class="relref">Section 13.2.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>) without any
ability for the data sender to influence this behavior.  A data sender's constraints
on the acknowledgment frequency need to be taken into account to maximize
congestion controller and loss recovery performance. This extension provides
a mechanism for a data sender to signal its preferences and constraints.<a href="#section-2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="nego">
<section id="section-3">
      <h2 id="name-negotiating-extension-use">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-negotiating-extension-use" class="section-name selfRef">Negotiating Extension Use</a>
      </h2>
<p id="section-3-1">After a data receiver advertises support for this extension, two new frames
can be sent by the data sender to provide guidance about delaying and sending
ACK frames. These frames are the ACK_FREQUENCY frame
(see <a href="#ack-frequency-frame" class="auto internal xref">Section 4</a>) and the IMMEDIATE_ACK frame
(see <a href="#immediate-ack-frame" class="auto internal xref">Section 5</a>).<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">Endpoints advertise their support of the extension described in this document by
sending the following transport parameter (<span><a href="https://rfc-editor.org/rfc/rfc9000#section-7.2" class="relref">Section 7.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>):<a href="#section-3-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3-3">
        <dt id="section-3-3.1">min_ack_delay (0xff04de1b):</dt>
        <dd style="margin-left: 1.5em" id="section-3-3.2">
          <p id="section-3-3.2.1">A variable-length integer representing the minimum amount of time, in
microseconds, that the endpoint sending this value is willing to
delay an acknowledgment. This limit could be based on the data receiver's
clock or timer granularity. min_ack_delay is used by the data sender to
avoid requesting too small a value in the Requested Max Ack Delay field of the
ACK_FREQUENCY frame.<a href="#section-3-3.2.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-3-4">An endpoint's min_ack_delay MUST NOT be greater than its max_ack_delay.
Endpoints that support this extension MUST treat receipt of a min_ack_delay that
is greater than the max_ack_delay as a connection error of type
TRANSPORT_PARAMETER_ERROR. Note that while the endpoint's max_ack_delay
transport parameter is in milliseconds (<span><a href="https://rfc-editor.org/rfc/rfc9000#section-18.2" class="relref">Section 18.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>),
min_ack_delay is specified in microseconds.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">The min_ack_delay transport parameter is a unilateral indication of support for
receiving ACK_FREQUENCY frames.  If an endpoint sends the transport parameter,
the peer is allowed to send ACK_FREQUENCY and IMMEDIATE_ACK frames independent
of whether it also sends the min_ack_delay transport parameter or not.<a href="#section-3-5" class="pilcrow">¶</a></p>
<p id="section-3-6">Until an ACK_FREQUENCY or IMMEDIATE_ACK frame is received, sending the min_ack_delay transport
parameter does not cause the endpoint to change its acknowledgment behavior.<a href="#section-3-6" class="pilcrow">¶</a></p>
<p id="section-3-7">Endpoints MUST NOT remember the value of the min_ack_delay transport parameter
they received for use in a subsequent connection. Consequently, ACK_FREQUENCY
and IMMEDIATE_ACK frames cannot be sent in 0-RTT packets, as per
<span><a href="https://rfc-editor.org/rfc/rfc9000#section-7.4.1" class="relref">Section 7.4.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-3-7" class="pilcrow">¶</a></p>
<p id="section-3-8">This Transport Parameter is encoded as per <span><a href="https://rfc-editor.org/rfc/rfc9000#section-18" class="relref">Section 18</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-3-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ack-frequency-frame">
<section id="section-4">
      <h2 id="name-ack_frequency-frame">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-ack_frequency-frame" class="section-name selfRef">ACK_FREQUENCY Frame</a>
      </h2>
<p id="section-4-1">Delaying acknowledgments as much as possible reduces work done by the endpoints
as well as network load. A data sender's loss detection and congestion control
mechanisms however need to be tolerant of this delay at the peer. A data sender
signals the conditions under which it wants to receive ACK frames using an
ACK_FREQUENCY frame, shown below:<a href="#section-4-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4-2">
<pre>
ACK_FREQUENCY Frame {
  Type (i) = 0xaf,
  Sequence Number (i),
  Ack-Eliciting Threshold (i),
  Requested Max Ack Delay (i),
  Reordering Threshold (i),
}
</pre><a href="#section-4-2" class="pilcrow">¶</a>
</div>
<p id="section-4-3">Following the common frame format described in <span><a href="https://rfc-editor.org/rfc/rfc9000#section-12.4" class="relref">Section 12.4</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>, ACK_FREQUENCY frames have a type of 0xaf, and contain the
following fields:<a href="#section-4-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-4-4">
        <dt id="section-4-4.1">Sequence Number:</dt>
        <dd style="margin-left: 1.5em" id="section-4-4.2">
          <p id="section-4-4.2.1">A variable-length integer representing the sequence number assigned to the
ACK_FREQUENCY frame by the sender so receivers ignore obsolete
frames.  A sending endpoint MUST send monotonically increasing values in
the Sequence Number field to allow obsolete ACK_FREQUENCY frames to be
ignored when packets are processed out of order.<a href="#section-4-4.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-4-4.3">Ack-Eliciting Threshold:</dt>
        <dd style="margin-left: 1.5em" id="section-4-4.4">
          <p id="section-4-4.4.1">A variable-length integer representing the maximum number of ack-eliciting
packets the recipient of this frame receives before sending an acknowledgment.
A receiving endpoint SHOULD send at least one ACK frame after receiving more
than this many ack-eliciting packets. A value of 0 results in
a receiver immediately acknowledging every ack-eliciting packet. By default, an
endpoint sends an ACK frame for every other ack-eliciting packet, as specified in
<span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2.2" class="relref">Section 13.2.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>, which corresponds to a value of 1.<a href="#section-4-4.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-4-4.5">Requested Max Ack Delay:</dt>
        <dd style="margin-left: 1.5em" id="section-4-4.6">
          <p id="section-4-4.6.1">A variable-length integer representing the value to which the data sender
requests the data receiver update its max_ack_delay
(<span><a href="https://rfc-editor.org/rfc/rfc9000#section-18.2" class="relref">Section 18.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>). The value of this field is in
microseconds, unlike the max_ack_delay transport parameter, which is in
milliseconds. On receipt of a valid value, the endpoint SHOULD update
its max_ack_delay to the value provided by the peer. Note that values
of 2^14 or greater are invalid for max_ack_delay, as specified in
<span><a href="https://rfc-editor.org/rfc/rfc9000#section-18.2" class="relref">Section 18.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>. A value smaller than the min_ack_delay
advertised by the peer is also invalid. Receipt of an invalid value MUST be
treated as a connection error of type PROTOCOL_VIOLATION.<a href="#section-4-4.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-4-4.7">Reordering Threshold:</dt>
        <dd style="margin-left: 1.5em" id="section-4-4.8">
          <p id="section-4-4.8.1">A variable-length integer that indicates the maximum packet
reordering before eliciting an immediate ACK, as specified in <a href="#out-of-order" class="auto internal xref">Section 6.2</a>.
If no ACK_FREQUENCY frames have been received, the data receiver immediately
acknowledges any subsequent packets that are received out-of-order, as specified
in <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2" class="relref">Section 13.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>, corresponding to a default value of 1.
A value of 0 indicates out-of-order packets do not elicit an immediate ACK.<a href="#section-4-4.8.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-4-5">ACK_FREQUENCY frames are ack-eliciting and congestion controlled. When an
ACK_FREQUENCY frame is lost, the sender is encouraged to send another
ACK_FREQUENCY frame, unless an ACK_FREQUENCY frame with a larger Sequence Number
value has already been sent. However, it is not forbidden to retransmit the lost
frame (see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.3" class="relref">Section 13.3</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>), because the receiver will ignore
duplicate or out-of-order ACK_FREQUENCY frames based on the Sequence Number.<a href="#section-4-5" class="pilcrow">¶</a></p>
<p id="section-4-6">A receiving endpoint MUST ignore a received ACK_FREQUENCY frame unless the
Sequence Number value in the frame is greater than the largest processed
value.<a href="#section-4-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="immediate-ack-frame">
<section id="section-5">
      <h2 id="name-immediate_ack-frame">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-immediate_ack-frame" class="section-name selfRef">IMMEDIATE_ACK Frame</a>
      </h2>
<p id="section-5-1">A sender can use an ACK_FREQUENCY frame to reduce the number of acknowledgments
sent by a receiver, but doing so increases the likelihood that time-sensitive
feedback is delayed as well. For example, as described in <a href="#loss" class="auto internal xref">Section 8.3</a>, delaying
acknowledgments can increase the time it takes for a sender to detect packet
loss. Sending an IMMEDIATE_ACK frame can help mitigate this problem.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">An IMMEDIATE_ACK frame can be useful in other situations as well. For example,
if a sender wants an immediate RTT measurement or if a sender wants to establish
receiver liveness as quickly as possible. PING frames
(<span><a href="https://rfc-editor.org/rfc/rfc9000#section-19.2" class="relref">Section 19.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>) are ack-eliciting, but if a PING frame is
sent without an IMMEDIATE_ACK frame, the receiver might not immediately send
an ACK based on its local ACK strategy.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">By definition IMMEDIATE_ACK frames are ack-eliciting and they are also
congestion controlled. An endpoint SHOULD send a packet containing an ACK frame
immediately upon receiving an IMMEDIATE_ACK frame. An endpoint MAY delay sending
an ACK frame despite receiving an IMMEDIATE_ACK frame. For example, an endpoint
might do this if a large number of received packets contain an IMMEDIATE_ACK or
if the endpoint is under heavy load.<a href="#section-5-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5-4">
<pre>
IMMEDIATE_ACK Frame {
  Type (i) = 0x1f,
}
</pre><a href="#section-5-4" class="pilcrow">¶</a>
</div>
<p id="section-5-5">IMMEDIATE_ACK frames do not need to be retransmitted.<a href="#section-5-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sending">
<section id="section-6">
      <h2 id="name-sending-acknowledgments">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-sending-acknowledgments" class="section-name selfRef">Sending Acknowledgments</a>
      </h2>
<p id="section-6-1">Prior to receiving an ACK_FREQUENCY frame, endpoints send acknowledgments as
specified in <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2.1" class="relref">Section 13.2.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">After receiving an ACK_FREQUENCY frame and updating its max_ack_delay and
Ack-Eliciting Threshold values (<a href="#ack-frequency-frame" class="auto internal xref">Section 4</a>), the data receiver
sends an acknowledgment when one of the following conditions are met since the
last acknowledgement was sent:<a href="#section-6-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-3.1">
          <p id="section-6-3.1.1">The number of received ack-eliciting packets is greater than the
Ack-Eliciting Threshold.<a href="#section-6-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-3.2">
          <p id="section-6-3.2.1">max_ack_delay amount of time has passed and at least one ack-eliciting packet
has been received.<a href="#section-6-3.2.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-6-4">An acknowledgment can be sent earlier based on the value of the
Reordering Threshold when a gap in packet numbers is detected,
see <a href="#out-of-order" class="auto internal xref">Section 6.2</a>.<a href="#section-6-4" class="pilcrow">¶</a></p>
<p id="section-6-5"><a href="#congestion" class="auto internal xref">Section 6.4</a> and <a href="#batch" class="auto internal xref">Section 6.5</a> describe exceptions to this strategy.<a href="#section-6-5" class="pilcrow">¶</a></p>
<div id="response-to-long-idle-periods">
<section id="section-6.1">
        <h3 id="name-response-to-long-idle-perio">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-response-to-long-idle-perio" class="section-name selfRef">Response to long idle periods</a>
        </h3>
<p id="section-6.1-1">It is important to receive timely feedback after long idle periods,
e.g. update stale RTT measurements. When no acknowledgment has been sent in
over one smoothed round trip time (<span><a href="https://rfc-editor.org/rfc/rfc9002#section-5.3" class="relref">Section 5.3</a> of [<a href="#QUIC-RECOVERY" class="cite xref">QUIC-RECOVERY</a>]</span>),
receivers are encouraged to send an acknowledgment soon after receiving
an ack-eliciting packet. This is not an issue specific to this document,
but the mechanisms specified herein could create excessive delays.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="out-of-order">
<section id="section-6.2">
        <h3 id="name-response-to-out-of-order-pa">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-response-to-out-of-order-pa" class="section-name selfRef">Response to Out-of-Order Packets</a>
        </h3>
<p id="section-6.2-1">As specified in <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2.1" class="relref">Section 13.2.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>, endpoints are expected to
send an immediate acknowledgment upon receipt of a reordered ack-eliciting
packet. After an ACK_FREQUENCY frame with a Reordering Threshold value other
than 1 has been received, this extension delays immediate acknowledgements
to reordered ack-eliciting packets and the gaps they can create.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">If the most recent ACK_FREQUENCY frame received from the peer has a Reordering
Threshold value of 0, the endpoint SHOULD NOT send an immediate
acknowledgment in response to packets received out of order, and instead
rely on the peer's Ack-Eliciting Threshold and Requested Max Ack Delay
for sending acknowledgments.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<p id="section-6.2-3">If the most recent ACK_FREQUENCY frame received from the peer has a Reordering
Threshold value larger than 1, the endpoint tests the amount of reordering
before deciding to send an acknowledgment. The specification uses the following
definitions:<a href="#section-6.2-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-6.2-4">
          <dt id="section-6.2-4.1">Largest Unacked:</dt>
          <dd style="margin-left: 1.5em" id="section-6.2-4.2">
            <p id="section-6.2-4.2.1">The largest packet number among all received ack-eliciting packets.<a href="#section-6.2-4.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.2-4.3">Largest Acked:</dt>
          <dd style="margin-left: 1.5em" id="section-6.2-4.4">
            <p id="section-6.2-4.4.1">The Largest Acknowledged value sent in an ACK frame.<a href="#section-6.2-4.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.2-4.5">Largest Reported Missing:</dt>
          <dd style="margin-left: 1.5em" id="section-6.2-4.6">
            <p id="section-6.2-4.6.1">The largest packet number that could be declared lost with the specified
Reordering Threshold, which is Largest Acked - Reordering Threshold.<a href="#section-6.2-4.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-6.2-4.7">Unreported Missing:</dt>
          <dd style="margin-left: 1.5em" id="section-6.2-4.8">
            <p id="section-6.2-4.8.1">Packets with packet numbers between the Largest Unacked and Largest Reported
Missing that have not yet been received.<a href="#section-6.2-4.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-6.2-5">An endpoint that receives an ACK_FREQUENCY frame with a non-zero Reordering
Threshold value SHOULD send an immediate ACK when the gap
between the smallest Unreported Missing packet and the Largest Unacked is greater
than or equal to the Reordering Threshold value. Sending this additional ACK will
reset the max_ack_delay timer and Ack-Eliciting Threshold counter (as any ACK
would do).<a href="#section-6.2-5" class="pilcrow">¶</a></p>
<p id="section-6.2-6">When an ack-eliciting packet is received with a packet number less than
Largest Acked, this still triggers an immediate acknowledgement in an effort to
avoid the packet being spuriously declared lost.<a href="#section-6.2-6" class="pilcrow">¶</a></p>
<p id="section-6.2-7">See <a href="#examples" class="auto internal xref">Section 6.2.1</a> for examples explaining this behavior. See <a href="#set-threshold" class="auto internal xref">Section 6.3</a>
for guidance on how to choose the reordering threshold value when sending
ACK_FREQUENCY frames.<a href="#section-6.2-7" class="pilcrow">¶</a></p>
<div id="examples">
<section id="section-6.2.1">
          <h4 id="name-examples">
<a href="#section-6.2.1" class="section-number selfRef">6.2.1. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
          </h4>
<p id="section-6.2.1-1">Note that the following examples assume that packets are
processed one-by-one in the received order as indicated below.<a href="#section-6.2.1-1" class="pilcrow">¶</a></p>
<p id="section-6.2.1-2">When the reordering threshold is 1, any time a packet is received
and there is a missing packet, an immediate acknowledgement is sent.<a href="#section-6.2.1-2" class="pilcrow">¶</a></p>
<p id="section-6.2.1-3">If the reordering theshold is 3 and acknowledgements are only sent due to
reordering, the sequence in <a href="#ack-reordering-3" class="auto internal xref">Table 1</a> would occur:<a href="#section-6.2.1-3" class="pilcrow">¶</a></p>
<span id="name-acknowledgement-behavior-wi"></span><div id="ack-reordering-3">
<table class="center" id="table-1">
            <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-acknowledgement-behavior-wi" class="selfRef">Acknowledgement behavior with a reordering threshold of 3</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Received Packet</th>
                <th class="text-left" rowspan="1" colspan="1">Largest Unacked</th>
                <th class="text-left" rowspan="1" colspan="1">Largest Acked</th>
                <th class="text-left" rowspan="1" colspan="1">Largest Reported Missing</th>
                <th class="text-left" rowspan="1" colspan="1">Unreported Missing</th>
                <th class="text-left" rowspan="1" colspan="1">Send Acknowledgement</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">No</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">No</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">3</td>
                <td class="text-left" rowspan="1" colspan="1">3</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">No</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">4</td>
                <td class="text-left" rowspan="1" colspan="1">4</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">No</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">5</td>
                <td class="text-left" rowspan="1" colspan="1">5</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">Yes (5 - 2 &gt;= 3)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">8</td>
                <td class="text-left" rowspan="1" colspan="1">8</td>
                <td class="text-left" rowspan="1" colspan="1">5</td>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">6,7</td>
                <td class="text-left" rowspan="1" colspan="1">No</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">9</td>
                <td class="text-left" rowspan="1" colspan="1">9</td>
                <td class="text-left" rowspan="1" colspan="1">5</td>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">6,7</td>
                <td class="text-left" rowspan="1" colspan="1">Yes (9 - 6 &gt;= 3)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">10</td>
                <td class="text-left" rowspan="1" colspan="1">10</td>
                <td class="text-left" rowspan="1" colspan="1">9</td>
                <td class="text-left" rowspan="1" colspan="1">6</td>
                <td class="text-left" rowspan="1" colspan="1">7</td>
                <td class="text-left" rowspan="1" colspan="1">Yes (10 - 7 &gt;= 3)</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-6.2.1-5">Note that in this example, the receipt of packet 9 triggers an ACK
that reports both packets 6 and 7 as missing. However,
the receipt of packet 10 needs to trigger another immediate ACK
because the sender will be unable to declare packet 7 as lost
(with a reordering threshold of 3) until it receives an ACK
reporting the reception of packet 10.<a href="#section-6.2.1-5" class="pilcrow">¶</a></p>
<p id="section-6.2.1-6">If the reordering threshold is 5 and acknowledgements are only sent due to
reordering, the sequence in <a href="#ack-reordering-5" class="auto internal xref">Table 2</a> would occur:<a href="#section-6.2.1-6" class="pilcrow">¶</a></p>
<span id="name-acknowledgement-behavior-wit"></span><div id="ack-reordering-5">
<table class="center" id="table-2">
            <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-acknowledgement-behavior-wit" class="selfRef">Acknowledgement behavior with a reordering threshold of 5</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Received Packet</th>
                <th class="text-left" rowspan="1" colspan="1">Largest Unacked</th>
                <th class="text-left" rowspan="1" colspan="1">Largest Acked</th>
                <th class="text-left" rowspan="1" colspan="1">Largest Reported Missing</th>
                <th class="text-left" rowspan="1" colspan="1">Unreported Missing</th>
                <th class="text-left" rowspan="1" colspan="1">Send Acknowledgement</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">No</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">No</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">3</td>
                <td class="text-left" rowspan="1" colspan="1">3</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">No</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">5</td>
                <td class="text-left" rowspan="1" colspan="1">5</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">2,4</td>
                <td class="text-left" rowspan="1" colspan="1">No</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">6</td>
                <td class="text-left" rowspan="1" colspan="1">6</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">2,4</td>
                <td class="text-left" rowspan="1" colspan="1">No</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">7</td>
                <td class="text-left" rowspan="1" colspan="1">7</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">-</td>
                <td class="text-left" rowspan="1" colspan="1">2,4</td>
                <td class="text-left" rowspan="1" colspan="1">Yes  (7 - 2 &gt;= 5)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">8</td>
                <td class="text-left" rowspan="1" colspan="1">8</td>
                <td class="text-left" rowspan="1" colspan="1">7</td>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">4</td>
                <td class="text-left" rowspan="1" colspan="1">No</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">9</td>
                <td class="text-left" rowspan="1" colspan="1">9</td>
                <td class="text-left" rowspan="1" colspan="1">7</td>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">4</td>
                <td class="text-left" rowspan="1" colspan="1">Yes  (9 - 4 &gt;= 5)</td>
              </tr>
            </tbody>
          </table>
</div>
</section>
</div>
</section>
</div>
<div id="set-threshold">
<section id="section-6.3">
        <h3 id="name-setting-the-reordering-thre">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-setting-the-reordering-thre" class="section-name selfRef">Setting the Reordering Threshold value</a>
        </h3>
<p id="section-6.3-1">To ensure timely loss detection, a data sender can send a Reordering Threshold
value that is the same as the loss detection packet threshold. If the
reordering threshold is
smaller than the packet threshold, an acknowledgement is unnecessarily sent
before the packet can be declared lost. If the value is larger, it can cause
unnecessary delays in loss detection. (<span><a href="https://rfc-editor.org/rfc/rfc9002#section-6.1.1" class="relref">Section 6.1.1</a> of [<a href="#QUIC-RECOVERY" class="cite xref">QUIC-RECOVERY</a>]</span>)
recommends a default packet threshold for loss detection of 3.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="congestion">
<section id="section-6.4">
        <h3 id="name-expediting-explicit-congest">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-expediting-explicit-congest" class="section-name selfRef">Expediting Explicit Congestion Notification (ECN) Signals</a>
        </h3>
<p id="section-6.4-1">If the Ack-Eliciting Threshold is larger than 1, an endpoint SHOULD send
an immediate acknowledgement when a packet marked with the ECN Congestion
Experienced (CE) <span>[<a href="#RFC3168" class="cite xref">RFC3168</a>]</span> codepoint in the IP header is received and
the previously received packet was not marked CE. From there on, if multiple
consecutive CE-marked packets are received or only non-CE-marked packet received,
the endpoint resumes sending acknowledgements based on the Ack-Eliciting
Threshold or max_ack_delay. Therefore, CE-marking only triggers an immediate
acknowledgement when there is a transition from non-CE-marked to CE-marked.<a href="#section-6.4-1" class="pilcrow">¶</a></p>
<p id="section-6.4-2">If the Ack-Eliciting Threshold is 0, every ack-eliciting packet is immediately
acknowledged, CE marked or not. If the Ack-Eliciting Threshold
is 1, the default behavior as specified in RFC9000 applies, which recommends to
immediately acknowledge all packets marked with CE (see
<span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2.1" class="relref">Section 13.2.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>).<a href="#section-6.4-2" class="pilcrow">¶</a></p>
<p id="section-6.4-3">Acknowledging the first CE marked packet immediately maintains
the peer's response time to congestion events, while also
reducing the ACK rate compared to <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2.1" class="relref">Section 13.2.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span> during
extreme congestion or when peers are using DCTCP <span>[<a href="#RFC8257" class="cite xref">RFC8257</a>]</span> or other
congestion controllers (e.g. <span>[<a href="#I-D.ietf-tsvwg-aqm-dualq-coupled" class="cite xref">I-D.ietf-tsvwg-aqm-dualq-coupled</a>]</span>) that mark
more frequently than classic ECN <span>[<a href="#RFC3168" class="cite xref">RFC3168</a>]</span>.<a href="#section-6.4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="batch">
<section id="section-6.5">
        <h3 id="name-batch-processing-of-packets">
<a href="#section-6.5" class="section-number selfRef">6.5. </a><a href="#name-batch-processing-of-packets" class="section-name selfRef">Batch Processing of Packets</a>
        </h3>
<p id="section-6.5-1">To avoid sending multiple acknowledgments in rapid succession, an endpoint can
process all packets in a batch before determining whether to send an ACK frame
in response, as stated in <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2.2" class="relref">Section 13.2.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-6.5-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="computation-of-probe-timeout-period">
<section id="section-7">
      <h2 id="name-computation-of-probe-timeou">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-computation-of-probe-timeou" class="section-name selfRef">Computation of Probe Timeout Period</a>
      </h2>
<p id="section-7-1">After requesting an update to the data receivers's max_ack_delay, a data sender
can use this new value in later computations of its Probe Timeout (PTO) period;
see <span><a href="https://rfc-editor.org/rfc/rfc9002#section-5.2.1" class="relref">Section 5.2.1</a> of [<a href="#QUIC-RECOVERY" class="cite xref">QUIC-RECOVERY</a>]</span>.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">Until the packet carrying the ACK_FREQUENCY frame is acknowledged, the endpoint
MUST use the greater of the current max_ack_delay and the value that is in flight
when computing the PTO period. Doing so avoids spurious PTOs that can be caused by
an update that decreases the peer's max_ack_delay.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">While it is expected that endpoints will have only one ACK_FREQUENCY frame in
flight at any given time, this extension does not prohibit having more than one
in flight. When using max_ack_delay for PTO computations, endpoints MUST use
the maximum of the current value and all those in flight.<a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4">When the number of in-flight ack-eliciting packets is larger than the
ACK-Eliciting Threshold, an endpoint can expect that the peer will not need to
wait for its max_ack_delay period before sending an acknowledgment. In such
cases, the endpoint MAY exclude the peer's max_ack_delay from its PTO
calculation.  When Reordering Threshold is set to 0 and loss prevents the peer
from receiving enough packets to trigger an immediate acknowledgment, the receiver
will wait max_ack_delay, increasing the chances of a premature PTO.
Therefore, if Reordering Threshold is set to 0, the PTO MUST be larger than the
peer's max_ack_delay.<a href="#section-7-4" class="pilcrow">¶</a></p>
<p id="section-7-5">When sending PTO packets, one can include an IMMEDIATE_ACK frame to elicit an
immediate acknowledgment. This avoids delaying acknowledgements of PTO packets
by the ack delay, reducing tail latency and allowing the sender
to exclude the peer's max_ack_delay from subsequent PTO calculations.<a href="#section-7-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="implementation">
<section id="section-8">
      <h2 id="name-determining-acknowledgment-">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-determining-acknowledgment-" class="section-name selfRef">Determining Acknowledgment Frequency</a>
      </h2>
<p id="section-8-1">This section provides some guidance on a sender's choice of acknowledgment
frequency and discusses some additional considerations. Implementers can select
an appropriate strategy to meet the needs of their applications and congestion
controllers.<a href="#section-8-1" class="pilcrow">¶</a></p>
<div id="congestion-control">
<section id="section-8.1">
        <h3 id="name-congestion-control">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-congestion-control" class="section-name selfRef">Congestion Control</a>
        </h3>
<p id="section-8.1-1">A sender needs to be responsive to notifications of congestion, such as
a packet loss or an ECN CE marking. Decreasing the acknowledgment frequency
can delay a sender's response to network congestion or cause it to underutilize
the available bandwidth.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">To limit the consequences of reduced acknowledgment frequency, a sender
can use the extension in this draft to request a receiver
to send an acknowledgment at least once per round trip,
when there are ack-eliciting packets in flight, in the following ways:<a href="#section-8.1-2" class="pilcrow">¶</a></p>
<p id="section-8.1-3">A data sender can set the Requested Max Ack Delay value
to no more than the estimated round trip time.
The sender can also improve feedback and robustness to
variation in the path RTT by setting the Ack-Eliciting Threshold
to a value no larger than number of maximum-sized packets that fit
into the current congestion window.
Alternatively, a sender can send an IMMEDIATE_ACK frame if no acknowledgement
has been received for more than one round trip time.  If the
packet containing an IMMEDIATE_ACK is lost, detection of that loss
will be delayed by the Reordering Threshold or Requested Max Ack Delay.<a href="#section-8.1-3" class="pilcrow">¶</a></p>
<p id="section-8.1-4">When setting the Requested Max Ack Delay as a function of the RTT, it is usually
better to use the Smoothed RTT (smoothed_rtt) (<span><a href="https://rfc-editor.org/rfc/rfc9002#section-5.3" class="relref">Section 5.3</a> of [<a href="#QUIC-RECOVERY" class="cite xref">QUIC-RECOVERY</a>]</span>) or another
estimate of the typical RTT, but not the minimum RTT (min_rtt)
(<span><a href="https://rfc-editor.org/rfc/rfc9002#section-5.2" class="relref">Section 5.2</a> of [<a href="#QUIC-RECOVERY" class="cite xref">QUIC-RECOVERY</a>]</span>). This avoids eliciting an
unnecessarily high number of acknowledgments when min_rtt is much smaller than
smoothed_rtt.<a href="#section-8.1-4" class="pilcrow">¶</a></p>
<p id="section-8.1-5">Note that the congestion window and the RTT estimate change over the lifetime of a
connection and therefore might require sending updates in an ACK_FREQUENCY frames to
ensure optimal performance, though not every change should trigger an update.
Usually, it is not necessary to send an ACK_FREQUENCY frame more than once per
RTT and likely even less frequently. Ideally, an ACK_FREQUENCY frame is sent only
when a relevant change in the congestion window or smoothed RTT is detected that
impacts the local setting of the reordering threshold or locally-selected calculation
of the either Ack-Eliciting Threshold or the Requested Max Ack Delay.<a href="#section-8.1-5" class="pilcrow">¶</a></p>
<p id="section-8.1-6">It is possible that the RTT is smaller than the receiver's timer granularity,
as communicated via the min_ack_delay transport parameter, preventing the
receiver from sending an acknowledgment every RTT in time unless packets are
acknowledged immediately.  In these cases, Reordering Threshold values other than 1
can delay loss detection more than an RTT.<a href="#section-8.1-6" class="pilcrow">¶</a></p>
<div id="application-limited-connections">
<section id="section-8.1.1">
          <h4 id="name-application-limited-connect">
<a href="#section-8.1.1" class="section-number selfRef">8.1.1. </a><a href="#name-application-limited-connect" class="section-name selfRef">Application-Limited Connections</a>
          </h4>
<p id="section-8.1.1-1">A congestion controller that is limited by the congestion window relies upon receiving
acknowledgments to send additional data into the network.  An increase in
acknowledgment delay increases the delay in sending data, which can reduce the
achieved throughput.  Congestion window growth can also depend upon receiving
acknowledgments. This can be particularly significant in slow start
(<span><a href="https://rfc-editor.org/rfc/rfc9002#section-7.3.1" class="relref">Section 7.3.1</a> of [<a href="#QUIC-RECOVERY" class="cite xref">QUIC-RECOVERY</a>]</span>), when delaying acknowledgments can delay
the increase in congestion window and can create larger packet bursts.<a href="#section-8.1.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1.1-2">If the sender is application-limited, acknowledgments can be delayed
unnecessarily when entering idle periods. Therefore, if no further data is
buffered to be sent, a sender can send an IMMEDIATE_ACK frame with the last data
packet before an idle period to avoid waiting for the ack delay.<a href="#section-8.1.1-2" class="pilcrow">¶</a></p>
<p id="section-8.1.1-3">If there are no inflight packets, no acknowledgments will be received for at least
a round trip when sending resumes. The max_ack_delay and Ack-Eliciting Threshold
values used by the receiver can further delay acknowledgments.  In this case, the
sender can include an IMMEDIATE_ACK or ACK_FREQUENCY frame in the first
Ack-Eliciting packet to avoid waiting for substantially more than a round trip
for an acknowledgment.<a href="#section-8.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="burst-mitigation">
<section id="section-8.2">
        <h3 id="name-burst-mitigation">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-burst-mitigation" class="section-name selfRef">Burst Mitigation</a>
        </h3>
<p id="section-8.2-1">Receiving an acknowledgment can allow a sender to release new packets into the
network. If a sender is designed to rely on the timing of peer acknowledgments
("ACK clock"), delaying acknowledgments can cause undesirable bursts of data
into the network. In keeping with <span><a href="https://rfc-editor.org/rfc/rfc9002#section-7.7" class="relref">Section 7.7</a> of [<a href="#QUIC-RECOVERY" class="cite xref">QUIC-RECOVERY</a>]</span>, a sender
can either employ pacing or limit bursts to the initial congestion window.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="loss">
<section id="section-8.3">
        <h3 id="name-loss-detection-and-timers">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-loss-detection-and-timers" class="section-name selfRef">Loss Detection and Timers</a>
        </h3>
<p id="section-8.3-1">Acknowledgments are fundamental to reliability in QUIC. Consequently,
delaying or reducing the frequency of acknowledgments can cause loss detection
at the sender to be delayed.<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<p id="section-8.3-2">A QUIC sender detects loss using packet thresholds on receiving an
acknowledgment (<span><a href="https://rfc-editor.org/rfc/rfc9002#section-6.1.1" class="relref">Section 6.1.1</a> of [<a href="#QUIC-RECOVERY" class="cite xref">QUIC-RECOVERY</a>]</span>); delaying the
acknowledgment therefore delays this method of detecting losses.<a href="#section-8.3-2" class="pilcrow">¶</a></p>
<p id="section-8.3-3">Reducing acknowledgment frequency reduces the number of RTT samples that a
sender receives (<span><a href="https://rfc-editor.org/rfc/rfc9002#section-5" class="relref">Section 5</a> of [<a href="#QUIC-RECOVERY" class="cite xref">QUIC-RECOVERY</a>]</span>), making a sender's RTT estimate
less responsive to changes in the path's RTT. As a result, any mechanisms that
rely on an accurate RTT estimate, such as time-threshold-based loss detection (<span><a href="https://rfc-editor.org/rfc/rfc9002#section-6.1.2" class="relref">Section 6.1.2</a> of [<a href="#QUIC-RECOVERY" class="cite xref">QUIC-RECOVERY</a>]</span>) or the Probe Timeout (PTO) (<span><a href="https://rfc-editor.org/rfc/rfc9002#section-6.2" class="relref">Section 6.2</a> of [<a href="#QUIC-RECOVERY" class="cite xref">QUIC-RECOVERY</a>]</span>),
will be less responsive to changes in the path's RTT, resulting in either
delayed or unnecessary packet transmissions.<a href="#section-8.3-3" class="pilcrow">¶</a></p>
<p id="section-8.3-4">A sender might use timers to detect loss of PMTU probe packets
(<span><a href="https://rfc-editor.org/rfc/rfc9000#section-14" class="relref">Section 14</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>). A sender MAY
bundle an IMMEDIATE_ACK frame with any PMTU probes to avoid triggering such
timers.<a href="#section-8.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="migration">
<section id="section-8.4">
        <h3 id="name-connection-migration">
<a href="#section-8.4" class="section-number selfRef">8.4. </a><a href="#name-connection-migration" class="section-name selfRef">Connection Migration</a>
        </h3>
<p id="section-8.4-1">To avoid additional delays to connection migration confirmation when using this
extension, a client can bundle an IMMEDIATE_ACK frame with the first non-probing
frame (<span><a href="https://rfc-editor.org/rfc/rfc9000#section-9.2" class="relref">Section 9.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>) it sends or it can send only an
IMMEDIATE_ACK frame, which is a non-probing frame.<a href="#section-8.4-1" class="pilcrow">¶</a></p>
<p id="section-8.4-2">An endpoint's congestion controller and RTT estimator are reset upon
confirmation of migration (<span><a href="https://rfc-editor.org/rfc/rfc9000#section-9.4" class="relref">Section 9.4</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>);
this changes the pattern of acknowledgments received after migration.<a href="#section-8.4-2" class="pilcrow">¶</a></p>
<p id="section-8.4-3">Therefore, an endpoint that has sent an ACK_FREQUENCY frame earlier in the
connection ought to send a new ACK_FREQUENCY frame upon confirmation of
connection migration with updated information, e.g. to consider the new RTT estimate.<a href="#section-8.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-9">
      <h2 id="name-security-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-9-1">An improperly configured or malicious data sender could request a
data receiver to acknowledge more frequently than its available resources
permit. However, there are two limits that make such an attack largely
inconsequential. First, the acknowledgment rate is bounded by the rate at which
data is received. Second, ACK_FREQUENCY and IMMEDIATE_ACK frames can only request
an increase in the acknowledgment rate, but cannot enforce it.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2"><span><a href="https://rfc-editor.org/rfc/rfc9000#section-21.9" class="relref">Section 21.9</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span> provides further guidance on peer denial of service
attacks that could abuse control frames, including ACK frames as well as the newly herein specified
ACK_FREQUENCY and IMMEDIATE_ACK frames, to cause disproportional
processing costs without observable impact on the state of the connection.
Especially, the IMMEDIATE_ACK frame does not only imply processing cost for receiving
and processing the control frame itself but can also cause additional sending of
packets. However, in general, with this extension, a sender cannot force a receiver to acknowledge
more frequently than the receiver considers safe based on its resource constraints.<a href="#section-9-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana">
<section id="section-10">
      <h2 id="name-iana-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-10-1">This document defines a new transport parameter to advertise support of the
extension described in this document and two new frame types to registered
by IANQ in the respective "QUIC Protocol" registries under
<a href="https://www.iana.org/assignments/quic/quic.xhtml">https://www.iana.org/assignments/quic/quic.xhtml</a>.<a href="#section-10-1" class="pilcrow">¶</a></p>
<div id="quic-transport-parameter">
<section id="section-10.1">
        <h3 id="name-quic-transport-parameter">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-quic-transport-parameter" class="section-name selfRef">QUIC Transport Parameter</a>
        </h3>
<p id="section-10.1-1">The following entry in <a href="#transport-parameters" class="auto internal xref">Table 3</a> has been requested to be provisionally added to
the "QUIC Transport Parameters" registry under the "QUIC Protocol" heading.<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<span id="name-addition-to-quic-transport-"></span><div id="transport-parameters">
<table class="center" id="table-3">
          <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-addition-to-quic-transport-" class="selfRef">Addition to QUIC Transport Parameters Entries</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Value</th>
              <th class="text-left" rowspan="1" colspan="1">Parameter Name.</th>
              <th class="text-left" rowspan="1" colspan="1">Specification</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0xff04de1b</td>
              <td class="text-left" rowspan="1" colspan="1">min_ack_delay</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#nego" class="auto internal xref">Section 3</a>
</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-10.1-3">When this document is approved, IANA is requested to assign a permanent allocation
of a codepoint in the 0-63 range to replace the provisional codepoint described above.<a href="#section-10.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="quic-frame-types">
<section id="section-10.2">
        <h3 id="name-quic-frame-types">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-quic-frame-types" class="section-name selfRef">QUIC Frame Types</a>
        </h3>
<p id="section-10.2-1">The following frame types have requested to be provisionally added to the "QUIC Frame Types"
registry under the "QUIC Protocol" heading.<a href="#section-10.2-1" class="pilcrow">¶</a></p>
<span id="name-addition-to-quic-frame-type"></span><div id="frame-types">
<table class="center" id="table-4">
          <caption>
<a href="#table-4" class="selfRef">Table 4</a>:
<a href="#name-addition-to-quic-frame-type" class="selfRef">Addition to QUIC Frame Types Entries</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Value</th>
              <th class="text-left" rowspan="1" colspan="1">Frame Name</th>
              <th class="text-left" rowspan="1" colspan="1">Specification</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0xaf</td>
              <td class="text-left" rowspan="1" colspan="1">ACK_FREQUENCY</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#ack-frequency-frame" class="auto internal xref">Section 4</a>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x1f</td>
              <td class="text-left" rowspan="1" colspan="1">IMMEDIATE_ACK</td>
              <td class="text-left" rowspan="1" colspan="1">
                <a href="#immediate-ack-frame" class="auto internal xref">Section 5</a>
</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-10.2-3">When this document is approved, IANA is requested to change the registration to
a permanent allocation of these frame types with the values described above.<a href="#section-10.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec-combined-references">
<section id="section-11">
      <h2 id="name-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-11.1">
        <h3 id="name-normative-references">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="QUIC-TRANSPORT">[QUIC-TRANSPORT]</dt>
        <dd>
<span class="refAuthor">Iyengar, J., Ed.</span> and <span class="refAuthor">M. Thomson, Ed.</span>, <span class="refTitle">"QUIC: A UDP-Based Multiplexed and Secure Transport"</span>, <span class="seriesInfo">RFC 9000</span>, <span class="seriesInfo">DOI 10.17487/RFC9000</span>, <time datetime="2021-05" class="refDate">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9000">https://www.rfc-editor.org/rfc/rfc9000</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC-RECOVERY">[QUIC-RECOVERY]</dt>
        <dd>
<span class="refAuthor">Iyengar, J., Ed.</span> and <span class="refAuthor">I. Swett, Ed.</span>, <span class="refTitle">"QUIC Loss Detection and Congestion Control"</span>, <span class="seriesInfo">RFC 9002</span>, <span class="seriesInfo">DOI 10.17487/RFC9002</span>, <time datetime="2021-05" class="refDate">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9002">https://www.rfc-editor.org/rfc/rfc9002</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-11.2">
        <h3 id="name-informative-references">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="Cus22">[Cus22]</dt>
        <dd>
<span class="refAuthor">Custura, A.</span>, <span class="refAuthor">Jones, T.</span>, <span class="refAuthor">Secchi, R.</span>, and <span class="refAuthor">G. Fairhurst</span>, <span class="refTitle">"Reducing the acknowledgement frequency in IETF QUIC"</span>, <span class="seriesInfo">DOI 10.1002/sat.1466</span>, <span class="seriesInfo">name IJSCN</span>, <time datetime="2022-10" class="refDate">October 2022</time>, <span>&lt;<a href="https://doi.org/10.1002/sat.1466">https://doi.org/10.1002/sat.1466</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3449">[RFC3449]</dt>
        <dd>
<span class="refAuthor">Balakrishnan, H.</span>, <span class="refAuthor">Padmanabhan, V.</span>, <span class="refAuthor">Fairhurst, G.</span>, and <span class="refAuthor">M. Sooriyabandara</span>, <span class="refTitle">"TCP Performance Implications of Network Path Asymmetry"</span>, <span class="seriesInfo">BCP 69</span>, <span class="seriesInfo">RFC 3449</span>, <span class="seriesInfo">DOI 10.17487/RFC3449</span>, <time datetime="2002-12" class="refDate">December 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3449">https://www.rfc-editor.org/rfc/rfc3449</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3168">[RFC3168]</dt>
        <dd>
<span class="refAuthor">Ramakrishnan, K.</span>, <span class="refAuthor">Floyd, S.</span>, and <span class="refAuthor">D. Black</span>, <span class="refTitle">"The Addition of Explicit Congestion Notification (ECN) to IP"</span>, <span class="seriesInfo">RFC 3168</span>, <span class="seriesInfo">DOI 10.17487/RFC3168</span>, <time datetime="2001-09" class="refDate">September 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3168">https://www.rfc-editor.org/rfc/rfc3168</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8257">[RFC8257]</dt>
        <dd>
<span class="refAuthor">Bensley, S.</span>, <span class="refAuthor">Thaler, D.</span>, <span class="refAuthor">Balasubramanian, P.</span>, <span class="refAuthor">Eggert, L.</span>, and <span class="refAuthor">G. Judd</span>, <span class="refTitle">"Data Center TCP (DCTCP): TCP Congestion Control for Data Centers"</span>, <span class="seriesInfo">RFC 8257</span>, <span class="seriesInfo">DOI 10.17487/RFC8257</span>, <time datetime="2017-10" class="refDate">October 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8257">https://www.rfc-editor.org/rfc/rfc8257</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-tsvwg-aqm-dualq-coupled">[I-D.ietf-tsvwg-aqm-dualq-coupled]</dt>
      <dd>
<span class="refAuthor">De Schepper, K.</span>, <span class="refAuthor">Briscoe, B.</span>, and <span class="refAuthor">G. White</span>, <span class="refTitle">"Dual-Queue Coupled Active Queue Management (AQM) for Low Latency, Low Loss, and Scalable Throughput (L4S)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-tsvwg-aqm-dualq-coupled-25</span>, <time datetime="2022-08-29" class="refDate">29 August 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-tsvwg-aqm-dualq-coupled-25">https://datatracker.ietf.org/doc/html/draft-ietf-tsvwg-aqm-dualq-coupled-25</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-A">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-A-1">The following people directly contributed key ideas that shaped this draft:
Bob Briscoe, Kazuho Oku, Marten Seemann.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">Thanks for the in-depth reviews by Lucas Pardue, Martin Thomson,
Magnus Westerlund, Kazuho Oku, Marten Seemann, Gorry Fairhurst and
Ingemar Johansson.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jana Iyengar</span></div>
<div dir="auto" class="left"><span class="org">Fastly</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jri.ietf@gmail.com" class="email">jri.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ian Swett</span></div>
<div dir="auto" class="left"><span class="org">Google</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ianswett@google.com" class="email">ianswett@google.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Mirja Kühlewind</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mirja.kuehlewind@ericsson.com" class="email">mirja.kuehlewind@ericsson.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
